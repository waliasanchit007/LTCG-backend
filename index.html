<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8">
    <title>PDF Parser Upload</title>
    <style>
      body { font-family: sans-serif; margin: 20px; }
      #output { white-space: pre-wrap; background: #f4f4f4; padding: 10px; border: 1px solid #ccc; margin-top: 20px; }
    </style>
  </head>
  <body>
    <h1>Upload PDF for Parsing</h1>
    <input type="file" id="file-input" accept=".pdf" />
    <button id="upload-button">Upload</button>
    <h2>Parsed Result:</h2>
    <pre id="output">Result will appear here.</pre>

    <script>
      document.getElementById("upload-button").addEventListener("click", async () => {
        const fileInput = document.getElementById("file-input");
        if (fileInput.files.length === 0) {
          alert("Please select a PDF file.");
          return;
        }
        const file = fileInput.files[0];
        console.log("Uploading file:", file.name);

        const formData = new FormData();
        formData.append("file", file);

        try {
          const response = await fetch("http://127.0.0.1:5000/upload", {
            method: "POST",
            body: formData
          });
          if (!response.ok) {
            throw new Error("Server error: " + response.statusText);
          }
          const data = await response.json();
          document.getElementById("output").textContent = JSON.stringify(data, null, 2);
          console.log("Parsed data received:", data);
        } catch (error) {
          console.error("Error:", error);
          document.getElementById("output").textContent = "Error: " + error.message;
        }
      });
    </script>
  </body>
</html>
